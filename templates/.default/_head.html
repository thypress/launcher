<!-- templates/partials/_head.hbs -->
<!-- SPDX-License-Identifier: MPL-2.0

This Source Code Form is subject to the terms of the Mozilla Public
License, v. 2.0. If a copy of the MPL was not distributed with this
file, You can obtain one at https://mozilla.org/MPL/2.0/.
-->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">

{{#if pageTitle}}
  <title>{{pageTitle}}</title>
{{else}}
  {{#if pageTitlePrefix}}
    <title>{{pageTitlePrefix}}{{pageTitleValue}}</title>
  {{else}}
    <title>{{config.title}}</title>
  {{/if}}
{{/if}}

<meta name="description" content="{{#if pageDescription}}{{pageDescription}}{{else}}{{config.description}}{{/if}}">

{{#if entry}}
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="article">
  <meta property="og:title" content="{{pageTitle}}">
  <meta property="og:description" content="{{pageDescription}}">
  <meta property="og:url" content="{{config.url}}{{entry.url}}">
  {{#if entry.ogImage}}
  <meta property="og:image" content="{{config.url}}{{entry.ogImage}}">
  {{/if}}
  <meta property="og:site_name" content="{{config.title}}">
  <meta property="article:published_time" content="{{entry.createdAtISO}}">
  <meta property="article:modified_time" content="{{entry.updatedAtISO}}">
  {{#if author}}
  <meta property="article:author" content="{{config.author}}">
  {{/if}}

  <!-- Twitter -->
  <meta name="twitter:card" content="{{#if entry.ogImage}}summary_large_image{{else}}summary{{/if}}">
  <meta name="twitter:title" content="{{pageTitle}}">
  <meta name="twitter:description" content="{{pageDescription}}">
  {{#if entry.ogImage}}
  <meta name="twitter:image" content="{{config.url}}{{entry.ogImage}}">
  {{/if}}

  <!-- SEO -->
  <link rel="canonical" href="{{config.url}}{{entry.url}}">
  {{#if author}}
  <meta name="author" content="{{config.author}}">
  {{/if}}

  <!-- JSON-LD Structured Data -->
  <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPageing",
  "headline": "{{pageTitle}}",
  "description": "{{pageDescription}}",
  "datePublished": "{{entry.createdAtISO}}",
  "dateModified": "{{entry.updatedAtISO}}",{{#if wordCount}}
  "wordCount": {{entry.wordCount}},{{/if}}{{#if readingTime}}
  "timeRequired": "PT{{entry.readingTime}}M",{{/if}}
  "author": {
    "@type": "Person",
    "name": "{{config.author}}"
  },{{#if entry.ogImage}}
  "image": "{{config.url}}{{entry.ogImage}}",{{/if}}
  "publisher": {
    "@type": "Organization",
    "name": "{{config.title}}",
    "url": "{{config.url}}"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{config.url}}{{entry.url}}"
  }
}
  </script>
{{else}}
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="{{#if pageTitle}}{{pageTitle}}{{else}}{{#if pageTitlePrefix}}{{pageTitlePrefix}}{{pageTitleValue}}{{else}}{{config.title}}{{/if}}{{/if}}">
  <meta property="og:description" content="{{#if pageDescription}}{{pageDescription}}{{else}}{{config.description}}{{/if}}">
  <meta property="og:url" content="{{config.url}}{{#if url}}{{entry.url}}{{else}}/{{/if}}">
  <meta property="og:site_name" content="{{config.title}}">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="{{#if pageTitle}}{{pageTitle}}{{else}}{{#if pageTitlePrefix}}{{pageTitlePrefix}}{{pageTitleValue}}{{else}}{{config.title}}{{/if}}{{/if}}">
  <meta name="twitter:description" content="{{#if pageDescription}}{{pageDescription}}{{else}}{{config.description}}{{/if}}">

  <!-- SEO -->
  <link rel="canonical" href="{{config.url}}{{#if url}}{{entry.url}}{{else}}/{{/if}}">
{{/if}}

<script>
  (function () {
    try {
      var t = localStorage.getItem("thypress-theme");
      if (t === "light" || t === "dark") {
        document.documentElement.setAttribute("data-theme", t);
      }
    } catch (e) {}
  })();
</script>

<link rel="stylesheet" href="/assets/style.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/charter-webfont@4/charter.min.css" />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Arimo:ital,wght@0,400..700;1,400..700&display=swap" rel="stylesheet">


<link id="hljs-theme-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
<link id="hljs-theme-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css" disabled>

<link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/rss.xml">

<script>
  (function () {
    function effectiveTheme() {
      var forced = document.documentElement.getAttribute("data-theme");
      if (forced === "light" || forced === "dark") return forced;
      try {
        return window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
      } catch (e) {
        return "light";
      }
    }

    function syncHljs(mode) {
      var light = document.getElementById("hljs-theme-light");
      var dark = document.getElementById("hljs-theme-dark");
      if (!light || !dark) return;
      if (mode === "dark") {
        light.disabled = true;
        dark.disabled = false;
      } else {
        light.disabled = false;
        dark.disabled = true;
      }
    }

    syncHljs(effectiveTheme());

    try {
      window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", function () {
        var forced = document.documentElement.getAttribute("data-theme");
        if (forced !== "light" && forced !== "dark") syncHljs(effectiveTheme());
      });
    } catch (e) {}
  })();
</script>
